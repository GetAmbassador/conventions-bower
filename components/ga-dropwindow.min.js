angular.module("ngAmbassador.dropwindow",["ngAnimate"]).directive("gaDropWindow",["$timeout",function($timeout){"use strict";return{restrict:"E",replace:!0,templateUrl:"../ambassador/templates/dropdown-window.html",transclude:!0,scope:!0,link:function(scope,elem,attr,ctrl,transclude){scope.buttonIcon=attr.buttonIcon,scope.buttonText=attr.buttonText,scope.buttonCaret=attr.buttonCaret,scope.windowTitle=attr.windowTitle,scope.windowId=attr.windowId,scope.dropdownOpen=!1,scope.toggleWindow=function(){var dropdownElem=elem[0].querySelector(".dropdown-window");angular.element(dropdownElem).removeClass("hidden"),!1===scope.dropdownOpen?scope.dropdownOpen=!0:scope.dropdownOpen=!1},scope.closeWindow=function(){scope.dropdownOpen&&(scope.dropdownOpen=!1)},transclude(scope,function(clone,scope){elem.find("section").append(clone)}),scope.$on("TOGGLE_DROPDOWN",function(event,args){(_.isUndefined(args)||_.isUndefined(args.windowId)||scope.windowId===args.windowId)&&$timeout(function(){scope.toggleWindow()})}),scope.$on("CLOSE_DROPDOWN",function(event,args){(_.isUndefined(args)||_.isUndefined(args.windowId)||scope.windowId===args.windowId)&&$timeout(function(){scope.closeWindow()})})}}}]);